<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Authentication and Authorization FAQ | ERP.net Developer Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Authentication and Authorization FAQ | ERP.net Developer Docs ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ErpNetDocs/dev/blob/master/building-apps/auth/concepts/faq.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="authentication-and-authorization-faq">Authentication and Authorization FAQ</h1>

<p>This page answers the most common questions developers have when connecting apps to ERP.net.</p>
<hr>
<h2 id="why-do-i-need-to-register-a-trusted-application">Why do I need to register a Trusted Application?</h2>
<p>Every app that signs in users or calls ERP.net APIs must be registered as a <strong>Trusted Application</strong> in your ERP.net instance.</p>
<p>It defines who the app is, what permissions (scopes) it has, and which authentication flows it may use.</p>
<p>Without this registration, ERP.net Identity will reject all authentication requests.</p>
<p>See: <a href="how-apps-connect/trusted-apps-access.html">Trusted Applications and Access Control</a></p>
<hr>
<h2 id="which-authentication-flow-should-i-use">Which authentication flow should I use?</h2>
<p>It depends on the type of app you're building:</p>
<ul>
<li><strong>Interactive web or desktop apps:</strong> use <strong>Authorization Code Flow</strong> (with PKCE).</li>
<li><strong>Background services or automations:</strong> use <strong>Client Credentials Flow</strong>.</li>
<li><strong>Apps with both frontend and backend:</strong> use the <strong>Hybrid Flow</strong> (combined).</li>
</ul>
<p>See: <a href="flows/choosing-flow.html">Choosing the Right Flow</a></p>
<hr>
<h3 id="can-i-call--apis-without-oauth">Can I call ERP.net APIs without OAuth?</h3>
<p>No.</p>
<p>Basic authentication and API keys are deprecated.</p>
<p>All external access must go through the ERP.net Identity using OAuth 2.0.</p>
<p>The only exception is <strong>reference tokens</strong> (PAT or SAT), which are manually issued and act like long-lived API keys - but even they require proper scope and authorization.</p>
<p>See: <a href="tokens/reference-access-tokens.html">Reference Access Tokens</a></p>
<hr>
<h3 id="whats-the-difference-between-a-user-token-and-a-service-token">What's the difference between a user token and a service token?</h3>
<ul>
<li><strong>User token (Authorization Code Flow):</strong> represents a person who logged in.</li>
<li><strong>Service token (Client Credentials Flow):</strong> represents an application identity (system user).</li>
</ul>
<p>They are not interchangeable - user tokens have personal access; service tokens have system-level access.</p>
<p>See: <a href="tokens/tokens-overview.html">Tokens Overview</a></p>
<hr>
<h2 id="my-login-works-but-api-calls-return-401-unauthorized-why">My login works, but API calls return 401 Unauthorized. Why?</h2>
<p>You are probably sending an expired or missing token in your API request.</p>
<p>Check these:</p>
<ol>
<li>Your request must include the header <code>Authorization: Bearer &lt;access_token&gt;</code></li>
<li>Access tokens expire after <strong>1 hour</strong>. Refresh or re-authenticate the user before calling again.</li>
<li>Make sure the token was issued for <strong>the same instance</strong> you're calling - tokens are instance-specific.</li>
</ol>
<hr>
<h3 id="my-app-says-invalid_client-what-does-that-mean">My app says &quot;invalid_client&quot;. What does that mean?</h3>
<p>It means your app's credentials don't match what ERP.net expects.</p>
<p><strong>Common reasons:</strong></p>
<ul>
<li>The <strong>client_id</strong> is wrong.</li>
<li>The app type is <strong>Public</strong>, but you're sending a secret.</li>
<li>The secret has been rotated or deleted.</li>
</ul>
<p><strong>Fix:</strong></p>
<p>Check your Trusted Application settings and make sure you use the correct client ID and secret.</p>
<p>Public (JavaScript) apps must not send a secret at all.</p>
<p>See: <a href="flows/auth-code/interactive-apps-errors.html">Interactive Apps Common Errors</a>
See: <a href="flows/client-credentials/service-apps-errors.html">Service Apps Common Errors</a></p>
<hr>
<h3 id="i-get-invalid_scope-what-does-that-mean">I get &quot;invalid_scope&quot;. What does that mean?</h3>
<p>You're asking for permissions your app is not allowed to have.</p>
<p><strong>Example:</strong></p>
<p>You request <code>update sec</code>, but your Trusted Application only has <code>read</code>.</p>
<p><strong>Fix:</strong></p>
<p>Update the app's allowed scopes, or request only those configured in ERP.net.</p>
<p>Common valid scopes are:<br>
<code>read</code>, <code>update</code>, <code>offline_access</code>, <code>profile</code>.</p>
<p>See: <a href="flows/auth-code/interactive-apps-errors.html">Interactive Apps Common Errors</a>
See: <a href="flows/client-credentials/service-apps-errors.html">Service Apps Common Errors</a></p>
<hr>
<h3 id="my-redirect-uri-is-rejected-as-invalid-why">My redirect URI is rejected as invalid. Why?</h3>
<p>The <code>redirect_uri</code> you send must exactly match one of the URIs defined in the Trusted Application - including <strong>https</strong>, casing, and trailing slash.</p>
<p><strong>Fix:</strong></p>
<p>Edit your Trusted Application and add the correct URI, for example:</p>
<pre><code class="lang-http">https://myapp.example.com/auth/callback
</code></pre>
<hr>
<h3 id="my-token-expired-after-one-hour-can-i-make-it-live-longer">My token expired after one hour. Can I make it live longer?</h3>
<p>No - access tokens are intentionally short-lived (1 hour) for security.</p>
<p>However, <strong>confidential</strong> apps can use a <strong>refresh token</strong> to get a new one automatically.</p>
<p>If your app is <strong>public</strong> (for example, runs only in the browser), it must ask the user to sign in again when the token expires.</p>
<p>See: <a href="tokens/token-lifetime.html">Token Lifetime and Renewal</a></p>
<hr>
<h3 id="i-have-a-refresh-token-but-it-stopped-working-why">I have a refresh token, but it stopped working. Why?</h3>
<p>Refresh tokens can expire or be revoked:</p>
<ul>
<li>Confidential apps: 30-day lifetime.</li>
<li>Public apps: 24-hour lifetime.</li>
<li>If the user logs out or changes their password, old tokens stop working.</li>
</ul>
<p>Always be ready to prompt the user to sign in again if refreshing fails.</p>
<p>See: <a href="tokens/token-lifetime.html">Token Lifetime and Renewal</a></p>
<hr>
<h3 id="whats-the-difference-between-a-token-and-a-session">What's the difference between a token and a session?</h3>
<ul>
<li>The <strong>token</strong> proves you're authorized.</li>
<li>The <strong>session</strong> is the actual connection that consumes a license.</li>
</ul>
<p>You can have a valid token but fail to open a session if all licenses are in use.</p>
<p>Sessions close automatically after inactivity (about 20 minutes).</p>
<p>See: <a href="sessions/token-session-relationship.html">Tokens and Sessions Relationship</a></p>
<hr>
<h3 id="can-i-log-out-programmatically">Can I log out programmatically?</h3>
<p>Yes - for interactive apps, redirect the user to:</p>
<pre><code class="lang-http">https://&lt;your-instance&gt;.my.erp.net/id/connect/endsession
</code></pre>
<p>The user will see a confirmation page and, after confirming, their session will close and release the license.</p>
<p>Service (non-interactive) apps do not use this endpoint - their sessions close automatically after expiration.</p>
<p>See: <a href="sessions/session-revocation.html">Session Revocation and Logout</a></p>
<hr>
<h3 id="why-does--reject-my-request-with-maximumlicensecountexceeded">Why does ERP.net reject my request with &quot;MaximumLicenseCountExceeded&quot;?</h3>
<p>All licenses are currently in use.</p>
<p>Even with a valid token, the system cannot open a new session until a slot becomes free.</p>
<p><strong>Fix:</strong></p>
<ul>
<li>Wait a few minutes - inactive sessions release automatically after 20 minutes.</li>
<li>Plan license capacity based on concurrency.</li>
</ul>
<p>See: <a href="sessions/license-slot.html">License Slot Usage</a></p>
<hr>
<h3 id="can-i-use-one-token-for-multiple-apps">Can I use one token for multiple apps?</h3>
<p>No - this violates ERP.net's license agreement.</p>
<p>Each user or service must have their own session and token.</p>
<p>Parallel requests with the same token share the same session and license.</p>
<p>See: <a href="sessions/license-compliance.html">License Compliance and Violations</a></p>
<hr>
<h3 id="how-can-i-safely-test-authentication">How can I safely test authentication?</h3>
<p>Use a <strong>sandbox instance</strong> or a dedicated test tenant.</p>
<p>Register a separate Trusted Application there, and use dummy users or test accounts.</p>
<p>Never reuse production secrets or tokens in test environments.</p>
<hr>
<h3 id="where-can-i-see-all-available-endpoints">Where can I see all available endpoints?</h3>
<p>Each ERP.net Identity exposes a discovery document with full endpoint metadata:</p>
<pre><code class="lang-http">https://&lt;your-instance&gt;.my.erp.net/id/.well-known/openid-configuration
</code></pre>
<p>This includes URLs for token exchange, authorization, logout, and JSON Web Keys (JWKS) for token validation.</p>
<hr>
<h2 id="learn-more">Learn More</h2>
<ul>
<li><a href="how-apps-connect/oauth2-overview.html">OAuth 2.0 Overview</a></li>
<li><a href="how-apps-connect/trusted-apps-access.html">Trusted Applications and Access Control</a></li>
<li><a href="tokens/token-lifetime.html">Token Lifetime and Renewal</a></li>
<li><a href="sessions/license-slot.html">License Slot Usage</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ErpNetDocs/dev/blob/master/building-apps/auth/concepts/faq.md/#L1" class="edit-link">Suggest improvement to this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
